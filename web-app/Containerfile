FROM registry.access.redhat.com/ubi9/python-312

WORKDIR /webapp

COPY ./requirements.txt /webapp/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /webapp/requirements.txt

COPY ./app /webapp/app/

ENV PORT 3000
EXPOSE 3000

CMD ["gunicorn", "-w", "2", "-b", "0.0.0.0:3000", "--worker-class", "gthread", "--worker-tmp-dir", "/dev/shm", "--log-file", "-", "app.main:app"]