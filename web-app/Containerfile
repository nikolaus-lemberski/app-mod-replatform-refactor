FROM registry.access.redhat.com/ubi9/python-312

WORKDIR /webapp

COPY ./requirements.txt /webapp/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /webapp/requirements.txt

COPY ./app /webapp/app/
COPY ./gunicorn_conf.py /webapp/gunicorn_conf.py

ENV PORT 3000
EXPOSE 3000

ENTRYPOINT ["gunicorn", "--config", "gunicorn_conf.py", "app.main:app"]